pipeline{
  agent any

  environment{
    secret=credentials('API_SECRET')


  }

  stages
  {
       stage('Build')
       {
         steps{
         echo "Building and Setup the Performance Project.........."
         sh '''
         echo "API TOKEN : ${secret}"
         sed 's/<APIToken>/${secret}/g' conf/configuration.py.template > conf/configuration.py

         grep "API_TOKEN"  conf/configuration.py

         pwd
         ls -l


         '''



         }
       }
       stage('PerformanceTest--Test GET User API Performance')
       {
         steps{
         echo "Test GET User API Performance.........."



         }
       }
       stage('PerformanceTest--Test Create User API Performance')
       {
         steps{
         echo "Test Create User API Performance(Post Method).........."



         echo "Create User Info CSV file .........."
         sh '''
             echo "current directary"
             echo $HOME
             pwd
             ls -la
             ./run_test.sh





          '''


         }
       }
       stage('PerformanceTest--Test Update User API Performance')
       {
         steps{
         echo "Test Update User API Performance(PUT Method).........."

         }
       }
       stage('PerformanceTest--Test Delete User API Performance')
       {
         steps{
         echo "Test Delete User API Performance(Delete Method).........."


         }
       }
       stage('Deploy')
       {
         steps{
         echo "Deploying Performance Project.........."
         }
       }

    }

}
